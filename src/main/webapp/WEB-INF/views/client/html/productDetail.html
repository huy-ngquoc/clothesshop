<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Aurora Apparel — Product Detail</title>
    <meta name="description"
        content="Product detail page with color and size variants, dynamic price and stock, and add-to-cart." />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        .gallery-main {
            height: 480px;
            object-fit: cover;
        }

        .thumb {
            height: 90px;
            object-fit: cover;
            cursor: pointer;
            border: 1px solid rgba(0, 0, 0, .1);
        }

        .color-dot {
            display: inline-block;
            width: 1rem;
            height: 1rem;
            border-radius: 50%;
            border: 1px solid rgba(0, 0, 0, .15);
            margin-right: .5rem;
            vertical-align: middle;
        }

        .color-Black {
            background: #000000;
        }

        .color-White {
            background: #ffffff;
        }

        .color-Navy {
            background: #0b2b50;
        }

        .color-Blue {
            background: #1971c2;
        }

        .color-Red {
            background: #e03131;
        }

        .color-Green {
            background: #2f9e44;
        }

        .size-pill {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 3rem;
            padding: .4rem .75rem;
            border: 1px solid rgba(0, 0, 0, .2);
            border-radius: 999px;
            cursor: pointer;
            user-select: none;
        }

        .size-pill.active {
            background: #000000;
            color: #ffffff;
            border-color: #000000;
        }

        .size-pill.disabled {
            opacity: .4;
            cursor: not-allowed;
            text-decoration: line-through;
        }
    </style>
</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg bg-white border-bottom sticky-top" aria-label="Main navigation">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html" title="Aurora Apparel">Aurora Apparel</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMain"
                aria-controls="navMain" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div id="navMain" class="collapse navbar-collapse">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="shop.html">Shop</a></li>
                </ul>
                <a class="btn btn-outline-dark" href="#cart" role="button" aria-label="View cart">Cart (0)</a>
            </div>
        </div>
    </nav>

    <!-- BREADCRUMB -->
    <nav class="bg-light border-bottom" aria-label="Breadcrumb">
        <div class="container">
            <ol class="breadcrumb py-2 mb-0">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item"><a href="shop.html">Shop</a></li>
                <li class="breadcrumb-item active" aria-current="page">Product Detail</li>
            </ol>
        </div>
    </nav>

    <!-- MAIN -->
    <main class="py-4">
        <div class="container">
            <div class="row g-4">
                <!-- Gallery -->
                <div class="col-12 col-lg-6">
                    <img id="mainImage" src="https://picsum.photos/seed/denim-main/1000/800"
                        class="img-fluid rounded gallery-main w-100" alt="Product main image" />
                    <div class="row g-2 mt-2">
                        <div class="col-3">
                            <img data-img="https://picsum.photos/seed/denim-main/1000/800"
                                class="img-fluid rounded thumb w-100"
                                src="https://picsum.photos/seed/denim-main/300/240" alt="Thumbnail 1" />
                        </div>
                        <div class="col-3">
                            <img data-img="https://picsum.photos/seed/denim-black/1000/800"
                                class="img-fluid rounded thumb w-100"
                                src="https://picsum.photos/seed/denim-black/300/240" alt="Thumbnail Black" />
                        </div>
                        <div class="col-3">
                            <img data-img="https://picsum.photos/seed/denim-navy/1000/800"
                                class="img-fluid rounded thumb w-100"
                                src="https://picsum.photos/seed/denim-navy/300/240" alt="Thumbnail Navy" />
                        </div>
                        <div class="col-3">
                            <img data-img="https://picsum.photos/seed/denim-white/1000/800"
                                class="img-fluid rounded thumb w-100"
                                src="https://picsum.photos/seed/denim-white/300/240" alt="Thumbnail White" />
                        </div>
                    </div>
                </div>

                <!-- Info & Variants -->
                <div class="col-12 col-lg-6">
                    <h1 id="productName" class="h3 mb-2">Everyday Denim Jacket</h1>
                    <p id="sku" class="text-secondary mb-2">SKU: —</p>

                    <div class="d-flex align-items-center gap-3 mb-3">
                        <span id="price" class="h4 mb-0">$—</span>
                        <span id="stockBadge" class="badge text-bg-success">In stock</span>
                    </div>

                    <p class="mb-4 text-secondary">
                        A relaxed denim jacket built for daily wear. Soft-washed cotton, durable hardware, and a cut
                        that layers well over tees and hoodies.
                    </p>

                    <!-- Color -->
                    <div class="mb-3">
                        <label class="form-label fw-semibold">Color</label>
                        <div id="colorOptions" class="d-flex flex-wrap gap-3">
                            <!-- radios injected -->
                        </div>
                    </div>

                    <!-- Size -->
                    <div class="mb-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <label class="form-label fw-semibold mb-0">Size</label>
                            <a href="#size-guide" class="small">Size guide</a>
                        </div>
                        <div id="sizeOptions" class="d-flex flex-wrap gap-2 mt-2">
                            <!-- size pills injected -->
                        </div>
                    </div>

                    <!-- Quantity -->
                    <div class="mb-3">
                        <label for="qty" class="form-label fw-semibold">Quantity</label>
                        <div class="input-group" style="max-width: 240px;">
                            <button id="btnMinus" class="btn btn-outline-secondary" type="button"
                                aria-label="Decrease quantity">−</button>
                            <input id="qty" class="form-control text-center" type="number" inputmode="numeric" min="1"
                                value="1" aria-label="Quantity" />
                            <button id="btnPlus" class="btn btn-outline-secondary" type="button"
                                aria-label="Increase quantity">+</button>
                        </div>
                        <div id="stockHint" class="form-text">—</div>
                    </div>

                    <!-- Add to Cart -->
                    <div class="d-grid gap-2 d-sm-flex">
                        <button id="btnAddToCart" class="btn btn-dark btn-lg" type="button" disabled="disabled">Add to
                            Cart</button>
                        <button id="btnBuyNow" class="btn btn-outline-dark btn-lg" type="button">Buy Now</button>
                    </div>

                    <!-- Details -->
                    <hr class="my-4" />
                    <div class="row g-3">
                        <div class="col-12 col-md-6">
                            <h2 class="h6">Details</h2>
                            <ul class="text-secondary mb-0">
                                <li>100% cotton denim</li>
                                <li>Relaxed fit</li>
                                <li>Machine wash cold</li>
                            </ul>
                        </div>
                        <div class="col-12 col-md-6">
                            <h2 class="h6">Shipping &amp; Returns</h2>
                            <p class="text-secondary mb-0">Free shipping over $75. Easy 30-day returns.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Product tabs (optional copy section) -->
            <div class="row mt-5">
                <div class="col-12">
                    <ul class="nav nav-tabs" id="detailTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="desc-tab" data-bs-toggle="tab" data-bs-target="#desc"
                                type="button" role="tab" aria-controls="desc" aria-selected="true">Description</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="care-tab" data-bs-toggle="tab" data-bs-target="#care"
                                type="button" role="tab" aria-controls="care" aria-selected="false">Care</button>
                        </li>
                    </ul>
                    <div class="tab-content border-start border-end border-bottom p-3" id="detailTabsContent">
                        <div class="tab-pane fade show active" id="desc" role="tabpanel" aria-labelledby="desc-tab">
                            Cut from midweight denim with a gentle stonewash. Designed to soften with wear without
                            losing structure.
                        </div>
                        <div class="tab-pane fade" id="care" role="tabpanel" aria-labelledby="care-tab">
                            Turn inside out. Wash cold with like colors. Do not bleach. Tumble dry low or line dry.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="py-5 border-top">
        <div class="container d-flex flex-column flex-md-row justify-content-between align-items-start">
            <div>
                <h3 class="h6">Aurora Apparel</h3>
                <p class="text-secondary mb-0">Modern pieces that move with you.</p>
            </div>
            <p class="small text-secondary mb-0">© <span id="year">2025</span> Aurora Apparel. All rights reserved.</p>
        </div>
    </footer>

    <!-- Toast (Add to cart confirmation) -->
    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1080;">
        <div id="cartToast" class="toast align-items-center text-bg-dark border-0" role="status" aria-live="polite"
            aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body">Added to cart.</div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
                    aria-label="Close"></button>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // ===== Sample product with variants (replace with real data from your backend) =====
        var PRODUCT = {
            id: 101,
            name: "Everyday Denim Jacket",
            description: "A relaxed denim jacket built for daily wear.",
            imagesByColor: {
                "Black": "https://picsum.photos/seed/denim-black/1000/800",
                "Navy": "https://picsum.photos/seed/denim-navy/1000/800",
                "White": "https://picsum.photos/seed/denim-white/1000/800"
            },
            variants: [
                // color, size, price, stock, sku
                { color: "Black", size: "S", price: 79, stock: 5, sku: "DEN-JKT-BLK-S" },
                { color: "Black", size: "M", price: 79, stock: 0, sku: "DEN-JKT-BLK-M" },
                { color: "Black", size: "L", price: 79, stock: 8, sku: "DEN-JKT-BLK-L" },
                { color: "Black", size: "XL", price: 82, stock: 3, sku: "DEN-JKT-BLK-XL" },

                { color: "Navy", size: "S", price: 79, stock: 2, sku: "DEN-JKT-NVY-S" },
                { color: "Navy", size: "M", price: 79, stock: 6, sku: "DEN-JKT-NVY-M" },
                { color: "Navy", size: "L", price: 79, stock: 0, sku: "DEN-JKT-NVY-L" },
                { color: "Navy", size: "XL", price: 82, stock: 1, sku: "DEN-JKT-NVY-XL" },

                { color: "White", size: "S", price: 79, stock: 4, sku: "DEN-JKT-WHT-S" },
                { color: "White", size: "M", price: 79, stock: 5, sku: "DEN-JKT-WHT-M" },
                { color: "White", size: "L", price: 79, stock: 4, sku: "DEN-JKT-WHT-L" },
                { color: "White", size: "XL", price: 82, stock: 0, sku: "DEN-JKT-WHT-XL" }
            ]
        };

        // ===== State =====
        var state = {
            color: null,
            size: null,
            variant: null
        };

        // ===== Helpers =====
        function getUnique(list, key) {
            var set = new Set(list.map(function (v) { return v[key]; }));
            return Array.from(set);
        }

        function findVariant(color, size) {
            return PRODUCT.variants.find(function (v) {
                return v.color === color && v.size === size;
            }) || null;
        }

        function variantsForColor(color) {
            return PRODUCT.variants.filter(function (v) { return v.color === color; });
        }

        function sizesAvailableForColor(color) {
            return getUnique(variantsForColor(color), "size");
        }

        function imageForColor(color) {
            var url = PRODUCT.imagesByColor[color];
            return url || "https://picsum.photos/seed/denim-main/1000/800";
        }

        function setMainImage(url) {
            var img = document.getElementById("mainImage");
            if (img && url) { img.src = url; }
        }

        function formatPrice(n) {
            return "$" + n.toFixed(2);
        }

        // ===== Rendering =====
        function renderColors() {
            var colors = getUnique(PRODUCT.variants, "color");
            var container = document.getElementById("colorOptions");
            container.innerHTML = "";
            colors.forEach(function (c, i) {
                var id = "color_" + c;
                var wrapper = document.createElement("div");
                wrapper.className = "form-check";

                var input = document.createElement("input");
                input.className = "form-check-input";
                input.type = "radio";
                input.name = "color";
                input.id = id;
                input.value = c;

                var label = document.createElement("label");
                label.className = "form-check-label";
                label.setAttribute("for", id);
                var dot = document.createElement("span");
                dot.className = "color-dot color-" + c;
                label.appendChild(dot);
                label.appendChild(document.createTextNode(c));

                input.addEventListener("change", function () {
                    state.color = input.value;
                    state.size = null; // reset size when color changes
                    state.variant = null;
                    setMainImage(imageForColor(state.color));
                    renderSizes();
                    updateVariantUI();
                });

                wrapper.appendChild(input);
                wrapper.appendChild(label);
                container.appendChild(wrapper);

                // Preselect the first color
                if (i === 0) {
                    input.checked = true;
                    input.dispatchEvent(new Event("change"));
                }
            });
        }

        function renderSizes() {
            var allSizes = getUnique(PRODUCT.variants, "size");
            var container = document.getElementById("sizeOptions");
            container.innerHTML = "";

            allSizes.forEach(function (s) {
                var sizesForColor = state.color ? variantsForColor(state.color) : [];
                var match = sizesForColor.find(function (v) { return v.size === s; });
                var isAvailable = !!match;
                var inStock = match ? match.stock > 0 : false;

                var btn = document.createElement("button");
                btn.type = "button";
                btn.className = "size-pill";
                btn.textContent = s;
                btn.setAttribute("data-size", s);

                if (!isAvailable || !inStock) {
                    btn.classList.add("disabled");
                    btn.disabled = true;
                }

                btn.addEventListener("click", function () {
                    if (btn.disabled) { return; }
                    state.size = s;
                    state.variant = findVariant(state.color, state.size);
                    // Toggle active style
                    container.querySelectorAll(".size-pill").forEach(function (el) { el.classList.remove("active"); });
                    btn.classList.add("active");
                    updateVariantUI();
                });

                container.appendChild(btn);
            });
        }

        function updateVariantUI() {
            var priceEl = document.getElementById("price");
            var skuEl = document.getElementById("sku");
            var stockBadge = document.getElementById("stockBadge");
            var stockHint = document.getElementById("stockHint");
            var qtyEl = document.getElementById("qty");
            var addBtn = document.getElementById("btnAddToCart");

            if (state.variant) {
                priceEl.textContent = formatPrice(state.variant.price);
                skuEl.textContent = "SKU: " + state.variant.sku;

                var inStock = state.variant.stock > 0;
                stockBadge.textContent = inStock ? "In stock" : "Out of stock";
                stockBadge.className = "badge " + (inStock ? "text-bg-success" : "text-bg-secondary");

                qtyEl.max = String(Math.max(1, state.variant.stock));
                if (Number(qtyEl.value) < 1) { qtyEl.value = "1"; }
                if (Number(qtyEl.value) > state.variant.stock) { qtyEl.value = String(state.variant.stock); }

                stockHint.textContent = inStock ? ("Available: " + state.variant.stock) : "Currently unavailable";

                addBtn.disabled = !inStock;
            } else {
                // No variant fully selected yet
                priceEl.textContent = "Select color & size";
                skuEl.textContent = "SKU: —";
                stockBadge.textContent = "—";
                stockBadge.className = "badge text-bg-light";
                stockHint.textContent = "Pick a color and size to see availability.";
                addBtn.disabled = true;
            }
        }

        // ===== Quantity controls =====
        function attachQtyEvents() {
            var qtyEl = document.getElementById("qty");
            var minus = document.getElementById("btnMinus");
            var plus = document.getElementById("btnPlus");

            function clamp() {
                var min = Number(qtyEl.min) || 1;
                var max = state.variant ? Number(qtyEl.max || state.variant.stock) : 99;
                var val = Number(qtyEl.value);
                if (isNaN(val) || val < min) { val = min; }
                if (val > max) { val = max; }
                qtyEl.value = String(val);
            }

            minus.addEventListener("click", function () {
                qtyEl.value = String(Math.max(1, Number(qtyEl.value) - 1));
                clamp();
            });
            plus.addEventListener("click", function () {
                var max = state.variant ? state.variant.stock : 99;
                qtyEl.value = String(Math.min(max, Number(qtyEl.value) + 1));
                clamp();
            });
            qtyEl.addEventListener("change", clamp);
            qtyEl.addEventListener("input", clamp);
        }

        // ===== Add to cart / Buy now (demo only) =====
        function attachCartButtons() {
            var toastEl = document.getElementById("cartToast");
            var toast = new bootstrap.Toast(toastEl);
            var addBtn = document.getElementById("btnAddToCart");
            var buyBtn = document.getElementById("btnBuyNow");
            var qtyEl = document.getElementById("qty");

            addBtn.addEventListener("click", function () {
                if (!state.variant) { return; }
                var qty = Number(qtyEl.value);
                if (qty < 1 || qty > state.variant.stock) { return; }

                // Hook: send to backend here
                // fetch('/cart', { method:'POST', body: JSON.stringify({...}) })

                toastEl.querySelector(".toast-body").textContent =
                    "Added " + qty + " × " + PRODUCT.name + " (" + state.color + ", " + state.size + ") to cart.";
                toast.show();
            });

            buyBtn.addEventListener("click", function () {
                if (!state.variant) { return; }
                // Redirect to checkout with selected variant (demo)
                window.location.href = "#checkout?sku=" + encodeURIComponent(state.variant.sku) + "&qty=" + encodeURIComponent(document.getElementById("qty").value);
            });
        }

        // ===== Thumbnails =====
        function attachThumbClicks() {
            var thumbs = document.querySelectorAll(".thumb");
            thumbs.forEach(function (t) {
                t.addEventListener("click", function () {
                    var url = t.getAttribute("data-img");
                    setMainImage(url);
                });
            });
        }

        // ===== Init =====
        (function init() {
            // Footer year
            var yEl = document.getElementById("year");
            if (yEl) { yEl.textContent = new Date().getFullYear().toString(); }

            document.getElementById("productName").textContent = PRODUCT.name;

            renderColors();      // also sets first color and resets size
            renderSizes();       // sizes for the first color
            updateVariantUI();   // initial UI

            attachQtyEvents();
            attachCartButtons();
            attachThumbClicks();

            // Optional: preselect the first in-stock size for initial color
            var firstInStock = variantsForColor(state.color).find(function (v) { return v.stock > 0; });
            if (firstInStock) {
                state.size = firstInStock.size;
                state.variant = firstInStock;
                // Reflect pill UI
                var pills = document.querySelectorAll("#sizeOptions .size-pill");
                pills.forEach(function (p) {
                    if (p.getAttribute("data-size") === state.size) { p.classList.add("active"); }
                });
                setMainImage(imageForColor(state.color));
                updateVariantUI();
            }
        })();
    </script>
</body>

</html>